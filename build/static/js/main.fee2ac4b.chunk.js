(this["webpackJsonp2.6_puhelinluettelo"]=this["webpackJsonp2.6_puhelinluettelo"]||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var o=t(5),c=t.n(o),a=t(3),r=t(2),u=t(4),i=t.n(u),l="http://localhost:3001/api/persons",s=function(){return i.a.get(l).then((function(e){return e.data}))},d=function(e){return i.a.post(l,e).then((function(e){return e.data}))},h=function(e,n){return i.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},j=function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},b=t(0),f=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),u=Object(a.a)(c,2),i=u[0],l=u[1],f=Object(r.useState)(""),O=Object(a.a)(f,2),v=O[0],x=O[1],w=Object(r.useState)(""),S=Object(a.a)(w,2),C=S[0],k=S[1],y=Object(r.useState)(!0),N=Object(a.a)(y,2),P=N[0],I=N[1],T=Object(r.useState)(null),E=Object(a.a)(T,2),B=E[0],D=E[1];Object(r.useEffect)((function(){s().then((function(e){o(e)}))}),[]);var J=function(e){var n=e.message;return null===n?null:Object(b.jsx)("div",{style:{color:"green",fontStyle:"italic",fontSize:20,borderStyle:"solid",padding:10,background:"lightgrey"},children:n})},U=P?t:t.filter((function(e){return e.name.toUpperCase().includes(C.toUpperCase())}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(J,{message:B}),Object(b.jsx)(g,{newSearch:C,handleSearchChange:function(e){0===C.length&&I(!0),C.length>0&&I(!1),k(e.target.value)}}),Object(b.jsx)("h3",{children:"add a new"}),Object(b.jsx)(p,{addInfo:function(e){e.preventDefault();var n={name:i,number:v},c=t.map((function(e){return e.name})),a=t.map((function(e){return e.number}));if(console.log(c),console.log(a),c.includes(i)){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var r=c.indexOf(i);console.log(r);var u=t[r].id;console.log("Id on"+u),D("".concat(i," is now updated")),setTimeout((function(){D(null)}),5e3),h(u,n).then((function(e){o(t.filter((function(e){return e.id!==u}))),o(t.concat(e)),l(""),x("")}))}}else a.includes(v)?alert("Phone number ".concat(v," is already in use")):(D("".concat(i," is now added to phonebook")),setTimeout((function(){D(null)}),5e3),d(n).then((function(e){o(t.concat(e)),l(""),x("")})))},newName:i,handleNameChange:function(e){console.log(e.target.value),l(e.target.value)},newNumber:v,handleNumberChange:function(e){x(e.target.value)}}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(m,{namesToShow:U,persons:t,deletePerson:function(e){var n=e.id,c=e.name;window.confirm("Delete ".concat(c," from phonebook?"))&&(D("".concat(c," is now deleted from phonebook")),setTimeout((function(){D(null)}),5e3),j(n).then=function(){o(t.filter((function(e){return e.id!==n}))),l(""),x("")})}})]})},m=function(e){var n=e.namesToShow,t=e.deletePerson;return Object(b.jsx)("div",{children:n.map((function(e){return Object(b.jsx)(O,{person:e,deletePerson:function(){return t(e)}},e.id)}))})},O=function(e){var n=e.person,t=e.deletePerson;return console.log("person komponentissa tulostuuko id: "+n.id+" ja nimi: "+n.name),Object(b.jsxs)("li",{children:[n.name," ",n.number,Object(b.jsx)("button",{onClick:t,id:n.id,name:n.name,children:"delete"})]})},p=function(e){var n=e.addInfo,t=e.newName,o=e.handleNameChange,c=e.newNumber,a=e.handleNumberChange;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:t,onChange:o})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:c,onChange:a})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.newSearch,t=e.handleSearchChange;return Object(b.jsxs)("div",{children:["filer shown with ",Object(b.jsx)("input",{value:n,onChange:t})]})};c.a.render(Object(b.jsx)(f,{}),document.getElementById("root"));var v=f;c.a.render(Object(b.jsx)(v,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.fee2ac4b.chunk.js.map